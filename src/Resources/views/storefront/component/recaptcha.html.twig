{% sw_extends '@Storefront/storefront/component/recaptcha.html.twig' %}

{% block component_head_javascript_recaptcha %}
  {{ parent() }}
  {% block component_head_javascript_turnstile %}
    {% if config('core.basicInformation.activeCaptchasV2.turnstile.isActive') %}
      <script
        src="https://challenges.cloudflare.com/turnstile/v0/api.js"
        async
        defer
      ></script>
      {# prettier-ignore-start #}
      <script>
        function _turnstileCb() {
          for(const e of document.getElementsByClassName("cf-turnstile-verified")) { e.checked = true; }
        }
      </script>
      {# prettier-ignore-end #}
    {% endif %}
  {% endblock %}
{% endblock %}
